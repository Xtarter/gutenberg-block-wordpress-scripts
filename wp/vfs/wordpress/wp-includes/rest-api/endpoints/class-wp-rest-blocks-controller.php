<?php
 class WP_REST_Blocks_Controller extends WP_REST_Posts_Controller { public function check_read_permission( $post ) { if ( ! current_user_can( 'read_post', $post->ID ) ) { return false; } return parent::check_read_permission( $post ); } public function filter_response_by_context( $data, $context ) { $data = parent::filter_response_by_context( $data, $context ); unset( $data['title']['rendered'] ); unset( $data['content']['rendered'] ); return $data; } public function get_item_schema() { $schema = parent::get_item_schema(); $schema['properties']['title']['properties']['raw']['context'] = array( 'view', 'edit' ); $schema['properties']['content']['properties']['raw']['context'] = array( 'view', 'edit' ); unset( $schema['properties']['title']['properties']['rendered'] ); unset( $schema['properties']['content']['properties']['rendered'] ); return $schema; } } 