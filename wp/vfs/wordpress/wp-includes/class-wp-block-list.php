<?php
 class WP_Block_List implements Iterator, ArrayAccess, Countable { protected $blocks; protected $available_context; protected $registry; public function __construct( $blocks, $available_context = array(), $registry = null ) { if ( ! $registry instanceof WP_Block_Type_Registry ) { $registry = WP_Block_Type_Registry::get_instance(); } $this->blocks = $blocks; $this->available_context = $available_context; $this->registry = $registry; } public function offsetExists( $index ) { return isset( $this->blocks[ $index ] ); } public function offsetGet( $index ) { $block = $this->blocks[ $index ]; if ( isset( $block ) && is_array( $block ) ) { $block = new WP_Block( $block, $this->available_context, $this->registry ); $this->blocks[ $index ] = $block; } return $block; } public function offsetSet( $index, $value ) { if ( is_null( $index ) ) { $this->blocks[] = $value; } else { $this->blocks[ $index ] = $value; } } public function offsetUnset( $index ) { unset( $this->blocks[ $index ] ); } public function rewind() { reset( $this->blocks ); } public function current() { return $this->offsetGet( $this->key() ); } public function key() { return key( $this->blocks ); } public function next() { next( $this->blocks ); } public function valid() { return null !== key( $this->blocks ); } public function count() { return count( $this->blocks ); } } 